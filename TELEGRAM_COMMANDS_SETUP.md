# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∫–æ–º–∞–Ω–¥

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã Telegram –±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º.

## ü§ñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- **`/start` –∏–ª–∏ `/help`** - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
- **`/status`** - –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **`/balances`** - –¢–µ–∫—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã –ø–æ –≤—Å–µ–º –º–æ–Ω–µ—Ç–∞–º –∏ –≤–∞–ª—é—Ç–∞–º
- **`/profit`** - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–±—ã–ª–∏ –∏ —É–±—ã—Ç–∫–æ–≤
- **`/summary`** - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–¥–µ–ª–∫–∞–º

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

#### `/status`
```
ü§ñ –°—Ç–∞—Ç—É—Å —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

üî∏ –†–µ–∂–∏–º: üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
üïí –í—Ä–µ–º—è: 2024-01-15 15:30:45 UTC
üìä –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: 25
üí∞ –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: $12.4567
üí∏ –û–±—â–∏–µ –∫–æ–º–∏—Å—Å–∏–∏: $2.1234
üìà –û–±—ä—ë–º —Ç–æ—Ä–≥–æ–≤: $1250.00

‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

#### `/balances`
```
üí∞ –¢–µ–∫—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã:

üü¶ Bybit:
   ‚Ä¢ USDT: 955.123456
   ‚Ä¢ BTC: 0.001234

üü® Binance:
   ‚Ä¢ USDT: 1045.567890
   ‚Ä¢ ETH: 0.012345
```

#### `/profit`
```
üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–±—ã–ª–∏:

üíö –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: $12.4567
üìä –°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å: $0.6228
üéØ –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: 65.0%

‚úÖ –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫: 13
‚ùå –£–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫: 7
üìã –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ —Å P&L: 20

üèÜ –õ—É—á—à–∞—è —Å–¥–µ–ª–∫–∞: $5.4321
üìâ –•—É–¥—à–∞—è —Å–¥–µ–ª–∫–∞: -$2.1098

üí∏ –û–±—â–∏–µ –∫–æ–º–∏—Å—Å–∏–∏: $2.1234
üìä –û–±—ä—ë–º —Ç–æ—Ä–≥–æ–≤: $1250.00
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [TELEGRAM_SETUP.md](TELEGRAM_SETUP.md) –¥–ª—è:
1. –°–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∏ Chat ID
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook:

1. **–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`**:
   ```env
   TELEGRAM_BOT_WEBHOOK_URL=https://your-domain.com/telegram-webhook
   ```

2. **Webhook –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞

### –®–∞–≥ 3: –ë–µ–∑ webhook (polling)

–ï—Å–ª–∏ webhook –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑:
- –ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API endpoints
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üì° API Endpoints

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ HTTP API:

### GET /status
```bash
curl http://localhost:8000/status
```

### GET /balances
```bash
curl http://localhost:8000/balances
```

### GET /profit
```bash
curl http://localhost:8000/profit
```

### POST /telegram-webhook
```bash
curl -X POST http://localhost:8000/telegram-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "message": {
      "chat": {"id": "123456789"},
      "text": "/status"
    }
  }'
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥:

```bash
python test_telegram_commands.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –°–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–¥–µ–ª–∫–∏, –±–∞–ª–∞–Ω—Å—ã)
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç API endpoints
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**:
   ```bash
   python -m bot.main
   ```

2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É –≤ Telegram**:
   - –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/help` –¥–ª—è –Ω–∞—á–∞–ª–∞

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
   ```bash
   tail -f bot.log
   ```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –ö–æ–º–∞–Ω–¥—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞**
- Chat ID –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö —á–∞—Ç–æ–≤ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥ —Ñ–∞–π–ª
- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
TELEGRAM_BOT_TOKEN=123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw
TELEGRAM_CHAT_ID=123456789
TELEGRAM_ENABLED=True
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
TELEGRAM_BOT_WEBHOOK_URL=https://your-domain.com/telegram-webhook
```

## üö´ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥

–ß—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å Telegram –∫–æ–º–∞–Ω–¥—ã:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ** `TELEGRAM_ENABLED=False` –≤ `.env`
2. **–ò–ª–∏ —É–¥–∞–ª–∏—Ç–µ** `TELEGRAM_BOT_TOKEN`

API endpoints –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
   ```bash
   python test_telegram.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
   ```bash
   grep "Telegram" bot.log
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Chat ID**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Chat ID
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL**:
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
   - –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
   ```bash
   grep "webhook" bot.log
   ```

3. **–£–¥–∞–ª–∏—Ç–µ webhook**:
   ```bash
   curl -X POST "https://api.telegram.org/bot<TOKEN>/deleteWebhook"
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç**: `python test_telegram_commands.py`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**: –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. **–ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏**: `bot.log` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
